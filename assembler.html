
<html><head>
    <input type="file" id="files" name="files[]" multiple />
    <output id="list"></output>
    <br> <br>
<style>
    body {
        margin: 0%;
    }

    @font-face {
        font-family: "CG";
        src: url(./resources/CENTURYGOTHIC.ttf) format("truetype");
    }

    textarea {
        margin-left: 0%;
        margin-top: 0%;
        height: 10%;
        width: 20%;
        resize: none;
        visibility: visible;
        background-color: white;
        border-color: black;

    }

    button {
        background-color: white;
        font-family: CG;
        border-color: black;
        border-width: 1px;
        text-transform: capitalize;
    }

</style></head>


<body>
    <textarea id="textbox">r0</textarea><br><br>
    <button id="create">SAVE TO FILE</button>
    <a download="notes.txt" id="downloadlink" style="display: none"><button onclick="functionreset()">DOWNLOAD</button></a>
    <br>


    <script>
        var mnemonic = "SYS";
        var N = 1;
        var NN = 10;
        var NNN = 100;

        //INPUT
          
        function handleFileSelect(evt) {
            var files = evt.target.files; // FileList object

            // files is a FileList of File objects. List some properties.
            var output = [];
            for (var i = 0, f; f = files[i]; i++) {
              output.push('<li><strong>', escape(f.name), '</strong> (', f.type || 'n/a', ') - ',
                          f.size, ' bytes, last modified: ',
                          f.lastModifiedDate ? f.lastModifiedDate.toLocaleDateString() : 'n/a',
                          '</li>');
            }
            document.getElementById('list').innerHTML = '<ul>' + output.join('') + '</ul>';
      }

        document.getElementById('files').addEventListener('change', handleFileSelect, false);

        //OUTPUT

        (function() {
            var textFile = null,
                makeTextFile = function(text) {
                    var data = new Blob([text], {
                        type: 'text/plain'
                    });

                    // If we are replacing a previously generated file we need to
                    // manually revoke the object URL to avoid memory leaks.
                    if (textFile !== null) {
                        window.URL.revokeObjectURL(textFile);
                    }

                    textFile = window.URL.createObjectURL(data);

                    return textFile;
                };

            /////////////// EXTRACT INFO FROM A TEXT FILE///////////

            //For sample
            
            switch (mnemonic) {
                case "CLS":
                    var create = document.getElementById('create'),textbox = document.getElementById("textbox").value = "0x00E0";
                    alert(textbox);
                    break;

                case "RTS" :
                    var create = document.getElementById('create'),textbox = document.getElementById("textbox").value = "0x00EE";
                    break;
                case "SYS":
                    var create = document.getElementById('create'),textbox = document.getElementById("textbox").value = "0x0" + NNN;
                    break;
                // case JUMP:
                //     var create = document.getElementById('create'),textbox = document.getElementById("textbox").value = "0x1" + NNN;
                //     break;

                // case CALL:
                //     var create = document.getElementById('create'),textbox = document.getElementById("textbox").value = "0x2" + NNN;
                //     break;

                // case SKE:
                //     var create = document.getElementById('create'),textbox = document.getElementById("textbox").value = "0x3" + reg + NNN;
                //     break;

                // case SKNE:
                //     var create = document.getElementById('create'),textbox = document.getElementById("textbox").value = "0x4" + reg + NNN;
                //     break;


                // case SKR:
                //     var create = document.getElementById('create'),textbox = document.getElementById("textbox").value = "0x5" + reg + reg2 + "0";
                //     break;

                // case LOAD:
                //     var create = document.getElementById('create'),textbox = document.getElementById("textbox").value = "0x6" + reg + NN;
                //     break;
                    

                // case ADD:
                //     return "" + 7 + reg + NN;

                // case MOVE:
                //     return "" + 8 + reg + reg2 + 0;

                // case OR:
                //     return "" + 8 + reg + reg2 + 1;

                // case AND:
                //     return "" + 8 + reg + reg2 + 2;

                // case XOR:
                //     return "" + 8 + reg + reg2 + 3;

                // case ADDR:
                //     return "" + 8 + reg + reg2 + 4;

                // case SUB:
                //     return "" + 8 + reg + reg2 + 5;

                // case SHR:
                //     return "" + 8 + reg + 0 + 6;

                // case SHL:
                //     return "" + 8 + reg + 0 + "E";

                // case SKNE:
                //     return "" + 9 + reg + reg2 + 0;

                // case LOADI:
                //     return "A" + "" + NNN;

                // case JUMPI:
                //     return "B" + "" + NNN;

                // case RND:
                //     return "C" + "" + reg + NN;

                // case DRW:
                //     return "D" + "" + reg + reg2 + N;

                // case SKPR:
                //     return "E" + "" + reg + 9 + "E";

                // case SKNP:
                //     return "E" + "" + reg + "A" + 1;

                // case MOVED:
                //     return "F" + "" + reg + 0 + 7;

                // case KEYD:
                //     return "F" + "" + reg + 0 + "A";

                // case LOADD:
                //     return "F" + "" + reg + 1 + 5;

                // case LOADS:
                //     return "F" + "" + reg + 1 + 8;

                // case ADDI:
                //     return "F" + "" + reg + 1 + "E";

                // case LDSPR:
                //     return "F" + "" + reg + 2 + 9;

                // case BCD:
                //     return "F" + "" + reg + 3 + 3;

                // case STOR:
                //     return "F" + "" + reg + 5 + 5;

                // case READ:
                //     return "F" + "" + reg + 6 + 5;
            }

            create.addEventListener('click', function() {
                var link = document.getElementById('downloadlink');
                link.href = makeTextFile(textbox);
                link.style.display = 'block';
                document.getElementById('create').style.display = 'none';
            }, false);
        })();

        function functionreset() {
            var link = document.getElementById('downloadlink');
            link.style.display = 'none';
            document.getElementById('create').style.display = 'block';
        }

    </script>
    <script>
         document.getElementById("textbox").onchange = function() {functionreset()}
    </script>

<!-- REFERENCES: 

    https://stackoverflow.com/questions/52792178/i-want-to-save-textbox-to-txt-file-in-html-using-javascript-but-i-have-an-error?fbclid=IwAR3imyhtf-nizrShgFY1RA1H7CQyIk7_ZgAb2P1kLIjIQePSTCFvUdnj-J0-->

</body></html>
